cmake_minimum_required (VERSION 2.8)
project (EXAMPLES)
# version number
set (EXAMPLES_VERSION_MAJOR 1)
set (EXAMPLES_VERSION_MINOR 0)

# config files
configure_file (
	"${PROJECT_SOURCE_DIR}/examples_config.h.in"
	"${PROJECT_BINARY_DIR}/examples_config.h"
)

# include binary directory for config file
include_directories("${PROJECT_BINARY_DIR}")

#cmake_policy(SET CMP0037 OLD)

# add executables
add_custom_target(makedirs ALL)
add_custom_command(TARGET makedirs
	COMMAND ${CMAKE_COMMAND} -E make_directory ${CMAKE_BINARY_DIR}/misc_examples
	COMMAND ${CMAKE_COMMAND} -E make_directory ${CMAKE_BINARY_DIR}/network_examples
	COMMAND ${CMAKE_COMMAND} -E make_directory ${CMAKE_BINARY_DIR}/cgi_examples
)

# copy bitmaps to build
add_custom_target(copybitmaps ALL)
add_custom_command(TARGET copybitmaps
	COMMAND ${CMAKE_COMMAND} -E copy_directory ${PROJECT_SOURCE_DIR}/bitmaps ${CMAKE_BINARY_DIR}/misc_examples
)

# cflags
if (WIN32)
	if (MINGW)
	set(CMAKE_C_FLAGS "-std=gnu89 -Wall -Wno-unused-function")
	set(CMAKE_C_FLAGS_DEBUG "-std=gnu89 -Wall -Wno-unused-function")
	set(CMAKE_C_FLAGS_RELEASE "-std=gnu89 -Wall -Wno-unused-function")
	else ()
	set(CMAKE_C_FLAGS "-Wall -Wno-unused-function")
	set(CMAKE_C_FLAGS_DEBUG "-Wall -Wno-unused-function")
	set(CMAKE_C_FLAGS_RELEASE "-Wall -Wno-unused-function")
	endif ()
else ()
	set(CMAKE_C_FLAGS "-std=gnu89 -Wall -Wno-unused-function")
	set(CMAKE_C_FLAGS_DEBUG "-std=gnu89 -Wall -Wno-unused-function")
	set(CMAKE_C_FLAGS_RELEASE "-std=gnu89 -Wall -Wno-unused-function")
endif ()

set(CMAKE_MODULE_PATH ${CMAKE_MODULE_PATH} "${CMAKE_SOURCE_DIR}/cmake")
if (WIN32)
set(SDL2_DIR ${CMAKE_SOURCE_DIR}/SDL2-2.0.8)
endif (WIN32)

include(${CMAKE_SOURCE_DIR}/SDL2-2.0.8/sdl2-config.cmake)
find_package(SDL2 REQUIRED)
include_directories(${SDL2_INCLUDE_DIR})

# misc folder
add_executable(misc_examples/test1 misc_examples/test1.c)
add_dependencies(misc_examples/test1 makedirs)
add_executable(misc_examples/test2 misc_examples/test2.c)
add_dependencies(misc_examples/test2 makedirs)
add_executable(misc_examples/test3 misc_examples/test3.c)
add_dependencies(misc_examples/test3 makedirs)
add_executable(misc_examples/test4 misc_examples/test4.c)
add_dependencies(misc_examples/test4 makedirs)
add_executable(misc_examples/test5 misc_examples/test5.c)
add_dependencies(misc_examples/test5 makedirs)
add_executable(misc_examples/test6 misc_examples/test6.c)
add_dependencies(misc_examples/test6 makedirs)
add_executable(misc_examples/test7 misc_examples/test7.c)
add_dependencies(misc_examples/test7 makedirs)
add_executable(misc_examples/test8 misc_examples/test8.c)
add_dependencies(misc_examples/test8 makedirs)
add_executable(misc_examples/test9 misc_examples/test9.c)
add_dependencies(misc_examples/test9 makedirs)
add_executable(misc_examples/test10 misc_examples/test10.c)
add_dependencies(misc_examples/test10 makedirs)
add_executable(misc_examples/test11 misc_examples/test11.c)
add_dependencies(misc_examples/test11 makedirs)
add_executable(misc_examples/test12 misc_examples/test12.c)
add_dependencies(misc_examples/test12 makedirs)
add_executable(misc_examples/test13 misc_examples/test13.c)
add_dependencies(misc_examples/test13 makedirs)
add_executable(misc_examples/p1 misc_examples/p1.c)
add_dependencies(misc_examples/p1 makedirs)
add_executable(misc_examples/p2 misc_examples/p2.c)
add_dependencies(misc_examples/p2 makedirs)
add_executable(misc_examples/p3 misc_examples/p3.c)
add_dependencies(misc_examples/p3 makedirs)
add_executable(misc_examples/p4 misc_examples/p4.c)
add_dependencies(misc_examples/p4 makedirs)
add_executable(misc_examples/p5 misc_examples/p5.c)
add_dependencies(misc_examples/p5 makedirs)
add_executable(misc_examples/p6 misc_examples/p6.c)
add_dependencies(misc_examples/p6 makedirs)
add_executable(misc_examples/p7 misc_examples/p7.c)
add_dependencies(misc_examples/p7 makedirs)
add_executable(misc_examples/p8 misc_examples/p8.c)
add_dependencies(misc_examples/p8 makedirs)
add_executable(misc_examples/p9 misc_examples/p9.c)
add_dependencies(misc_examples/p9 makedirs)
add_executable(misc_examples/p10 misc_examples/p10.c)
add_dependencies(misc_examples/p10 makedirs)
add_executable(misc_examples/p11 misc_examples/p11.c)
add_dependencies(misc_examples/p11 makedirs)
add_executable(misc_examples/p12 misc_examples/p12.c)
add_dependencies(misc_examples/p12 makedirs)
add_executable(misc_examples/p13 misc_examples/p13.c)
add_dependencies(misc_examples/p13 makedirs)
add_executable(misc_examples/p14 misc_examples/p14.c)
add_dependencies(misc_examples/p14 makedirs)
add_executable(misc_examples/p15 misc_examples/p15.c)
add_dependencies(misc_examples/p15 makedirs)
add_executable(misc_examples/p16 misc_examples/p16.c)
add_dependencies(misc_examples/p16 makedirs)
add_executable(misc_examples/t1 misc_examples/t1.c)
add_dependencies(misc_examples/t1 makedirs)
add_executable(misc_examples/t2 misc_examples/t2.c)
add_dependencies(misc_examples/t2 makedirs)
add_executable(misc_examples/t3 misc_examples/t3.c)
add_dependencies(misc_examples/t3 makedirs)
add_executable(misc_examples/t4 misc_examples/t4.c)
add_dependencies(misc_examples/t4 makedirs)
add_executable(misc_examples/t5 misc_examples/t5.c)
add_dependencies(misc_examples/t5 makedirs)
add_executable(misc_examples/calc misc_examples/calc.c)
add_dependencies(misc_examples/calc makedirs)
add_executable(misc_examples/calc2 misc_examples/calc2.c misc_examples/stack.c misc_examples/getop.c)
add_dependencies(misc_examples/calc2 makedirs)
add_executable(misc_examples/tree misc_examples/tree.c)
add_dependencies(misc_examples/tree makedirs)
add_executable(misc_examples/t6 misc_examples/t6.c)
add_dependencies(misc_examples/t6 makedirs)
add_executable(misc_examples/t7 misc_examples/t7.c)
add_dependencies(misc_examples/t7 makedirs)
add_executable(misc_examples/t8 misc_examples/t8.c)
add_dependencies(misc_examples/t8 makedirs)
add_executable(misc_examples/t9 misc_examples/t9.c)
add_dependencies(misc_examples/t9 makedirs)
add_executable(misc_examples/t10 misc_examples/t10.c)
add_dependencies(misc_examples/t10 makedirs)
add_executable(misc_examples/t11 misc_examples/t11.c)
add_dependencies(misc_examples/t11 makedirs)
add_executable(misc_examples/t12 misc_examples/t12.c)
add_dependencies(misc_examples/t12 makedirs)
add_executable(misc_examples/test14 misc_examples/test14.c)
add_dependencies(misc_examples/test14 makedirs)
add_executable(misc_examples/test15 misc_examples/test15.c)
add_dependencies(misc_examples/test15 makedirs)
add_executable(misc_examples/getint misc_examples/getint.c)
add_dependencies(misc_examples/getint makedirs)
add_executable(misc_examples/bitmap1 misc_examples/bitmap1.c)
add_dependencies(misc_examples/bitmap1 makedirs copybitmaps)
add_executable(misc_examples/bitmap2 misc_examples/bitmap2.c)
add_dependencies(misc_examples/bitmap2 makedirs copybitmaps)
add_executable(misc_examples/bitmap3 misc_examples/bitmap3.c)
add_dependencies(misc_examples/bitmap3 makedirs copybitmaps)
add_executable(misc_examples/bitmap4 misc_examples/bitmap4.c)
add_dependencies(misc_examples/bitmap4 makedirs copybitmaps)
add_executable(misc_examples/bitmap5 misc_examples/bitmap5.c)
add_dependencies(misc_examples/bitmap5 makedirs copybitmaps)
add_executable(misc_examples/bitmap6 misc_examples/bitmap6.c)
add_dependencies(misc_examples/bitmap6 makedirs copybitmaps)
add_executable(misc_examples/bitmap7 misc_examples/bitmap7.c)
add_dependencies(misc_examples/bitmap7 makedirs copybitmaps)
add_executable(misc_examples/bitmap8 misc_examples/bitmap8.c)
add_dependencies(misc_examples/bitmap8 makedirs copybitmaps)
add_executable(misc_examples/bitmap9 misc_examples/bitmap9.c)
add_dependencies(misc_examples/bitmap9 makedirs copybitmaps)
add_executable(misc_examples/bitmap10 misc_examples/bitmap10.c)
add_dependencies(misc_examples/bitmap10 makedirs copybitmaps)
add_executable(misc_examples/bitmap11 misc_examples/bitmap11.c)
add_dependencies(misc_examples/bitmap11 makedirs copybitmaps)
add_executable(misc_examples/bitmap12 misc_examples/bitmap12.c)
add_dependencies(misc_examples/bitmap12 makedirs copybitmaps)
add_executable(misc_examples/bitmap13 misc_examples/bitmap13.c)
add_dependencies(misc_examples/bitmap13 makedirs copybitmaps)
add_executable(misc_examples/bitmap14 misc_examples/bitmap14.c)
add_dependencies(misc_examples/bitmap14 makedirs copybitmaps)
add_executable(misc_examples/bitmap15 misc_examples/bitmap15.c)
add_dependencies(misc_examples/bitmap15 makedirs copybitmaps)
target_link_libraries(misc_examples/bitmap15 ${SDL2_LIBRARIES})

# add cgi example targets
add_executable(cgi_examples/test1 cgi_examples/test1.c)
add_dependencies(cgi_examples/test1 makedirs)

# add network example targets
add_executable(network_examples/test1 network_examples/test1.c)
add_dependencies(network_examples/test1 makedirs)
add_executable(network_examples/test2 network_examples/test2.c)
add_dependencies(network_examples/test2 makedirs)
add_executable(network_examples/test3 network_examples/test3.c)
add_dependencies(network_examples/test3 makedirs)
add_executable(network_examples/test4 network_examples/test4.c)
add_dependencies(network_examples/test4 makedirs)
add_executable(network_examples/test5 network_examples/test5.c)
add_dependencies(network_examples/test5 makedirs)
if (WIN32)
	target_link_libraries(network_examples/test1 ws2_32 kernel32 user32)
	target_link_libraries(network_examples/test2 ws2_32 kernel32 user32)
	target_link_libraries(network_examples/test3 ws2_32 kernel32 user32)
	target_link_libraries(network_examples/test4 ws2_32 kernel32 user32)
	target_link_libraries(network_examples/test5 ws2_32 kernel32 user32)
endif (WIN32)
